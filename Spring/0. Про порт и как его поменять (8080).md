[[Spring]]

Порт, на котором запускается ваше Spring Boot приложение, определяется настройками в файле `application.properties` (или `application.yml`). Если порт не указан явно, Spring Boot использует порт по умолчанию — **8080**. Однако порт может быть изменен в зависимости от конфигурации или других факторов.

### Откуда берется порт в `localhost`?

1. **Порт по умолчанию**:
    
    - Spring Boot использует порт **8080** по умолчанию, если вы не указали другой порт в конфигурации.
        
2. **Указание порта в `application.properties`**:
    
    - Вы можете явно указать порт в файле `application.properties`:
        
        server.port=8800
        
    - В этом случае ваше приложение будет доступно по адресу `http://localhost:8800`.
        
3. **Указание порта через командную строку**:
    
    - Вы можете передать порт как аргумент командной строки при запуске приложения:
        
        java -jar your-app.jar --server.port=8800
        
4. **Динамический порт (если порт занят)**:
    
    - Если порт **8080** (или другой указанный порт) уже занят другим процессом, Spring Boot автоматически попытается использовать следующий свободный порт (например, **8081**, **8082** и т.д.).
        
5. **Порт в облачных средах (Heroku, Cloud Foundry и т.д.)**:
    
    - Если вы запускаете приложение в облачной среде, порт может быть динамически назначен провайдером. В этом случае Spring Boot использует переменную окружения `PORT`, если она доступна:
        
        server.port=${PORT:8080}
        
    - Это означает: "используй порт из переменной окружения `PORT`, а если она не задана, используй порт 8080".
        
6. **Порт в тестах**:
    
    - Если вы запускаете тесты с использованием Spring Boot Test, порт может быть назначен случайным образом (например, `server.port=0`), чтобы избежать конфликтов. В этом случае порт будет выведен в логах.
        

---

### Почему у вас разные порты (8800, 8080 и т.д.)?

1. **Разные конфигурации**:
    
    - Возможно, у вас есть несколько профилей (например, `application-dev.properties`, `application-prod.properties`), и в каждом профиле указан разный порт.
        
2. **Конфликт портов**:
    
    - Если порт **8080** занят другим приложением (например, другим Spring Boot приложением, Tomcat, Docker-контейнером и т.д.), Spring Boot автоматически выберет следующий свободный порт.
        
3. **Запуск через IDE**:
    
    - Если вы запускаете приложение через IDE (например, IntelliJ IDEA или Eclipse), порт может быть переопределен в настройках запуска.
        
4. **Использование `application.yml`**:
    
    - Если вы используете `application.yml` вместо `application.properties`, убедитесь, что порт указан правильно:
        
        server:
          port: 8800
        

---

### Как проверить, какой порт используется?

1. **Логи при запуске**:
    
    - При запуске Spring Boot приложения в логах вы увидите сообщение вида:
        
        Tomcat started on port(s): 8080 (http) with context path ''
        
    - Это указывает, на каком порту запущено приложение.
        
2. **Проверка занятых портов**:
    
    - Вы можете проверить, какие порты заняты на вашем компьютере:
        
        - На Windows:
            
            netstat -ano | findstr :8080
            
        - На Linux/Mac:
            
            lsof -i :8080
            
3. **Проверка конфигурации**:
    
    - Проверьте файл `application.properties` или `application.yml` на наличие строки `server.port`.
        

---

### Как явно задать порт?

Если вы хотите, чтобы ваше приложение всегда запускалось на определенном порте, добавьте в `application.properties`:

server.port=8800

Или в `application.yml`:

server:
  port: 8800

---

### Как сделать порт динамическим (случайным)?

Если вы хотите, чтобы Spring Boot каждый раз выбирал случайный свободный порт, укажите:

server.port=0

После запуска порт будет выведен в логах.