[[JavaBase]]
Следующий пример связан с созданием динамического списка из объектов. Каждый
объект в этом списке, кроме числового поля, содержит ссылку на следующий объект,
а самый последний объект ссылается на самый первый. При этом объекты имеют
метод, возвращающий в качестве результата значение поля объекта, отстоящего
от текущего объекта (из которого вызывается метод) на определенное количество
позиций.

class MyClass{
%%Поле для нумерации объектов%%
	int number=0;
%%Ссылка на следующий объект%%
	MyClass next=this;
%%Метод для создания списка объектов %%
	void create(int n){
		int i;
		MyClass A=this;
		MyClass B;
%%Создание списка%%
		for(i=1;i<=n;i++){
			B=new MyClass();
			A.next=B;
			B.number=A.number+1;
			A=B;
		}
%%Последний объект списка ссылается на начальный%%
		A.next=this;
	}
%%Метод для получения номера объекта в списке%%
	int get(int k){
		int i;
		MyClass obj=this;
		for(i=1;i<=k;i++){
			obj=obj.next;
		}
		return obj.number;
	}
}
%%Главный класс%%
class Demo{
	public static void main(String[] args){
%%Исходный объект%%
		MyClass obj=new MyClass();
%%Создание списка из четырех объектов (начальный и еще три объекта)%%
		obj.create(3);
%%Проверка содержимого списка%%
		System.out.println("Проверка значения поля number");
		System.out.println("2-й после начального: "+obj.get(2));
		System.out.println("4-й после начального: "+obj.get(4));
		System.out.println("2-й объект после 1-го: "+obj.next.get(2));
	}
}

Результат выполнения программы

Проверка значения поля number
2-й после начального: 2
4-й после начального: 0
2-й объект после 1-го: 3

Как работает код

  

1. Поля и структура класса

  

• number – поле для хранения уникального номера объекта.

• next – ссылка на следующий объект. Изначально указывает на текущий объект (this), создавая базовый круговой список из одного элемента.

  

2. Метод create(int n)

  

Этот метод создает связный список с n дополнительными объектами (всего будет n + 1, включая исходный объект).

  

Алгоритм:

1. Инициализация:

• Переменная A указывает на текущий объект (this).

2. Цикл:

• Создается новый объект B.

• Поле next текущего объекта A ссылается на новый объект B.

• У нового объекта B устанавливается номер, равный номеру предыдущего объекта A плюс 1.

• A обновляется, чтобы указывать на новый объект B.

3. После завершения цикла последний объект (теперь A) ссылается на начальный объект (this), замыкая круг.

  

3. Метод get(int k)

  

Этот метод возвращает номер объекта, который находится на k позиций дальше от текущего объекта.

  

Алгоритм:

1. Начать с текущего объекта (this).

2. Пройти по круговому списку k раз, переходя к следующему объекту через поле next.

3. Вернуть поле number найденного объекта.

  

4. Главный класс Demo

  

Шаги:

1. Создается исходный объект obj.

2. Вызывается метод create(3), который добавляет три объекта к списку, создавая круговой список из четырех объектов.

3. Проверяются значения поля number у различных объектов:

• obj.get(2) – номер второго объекта после начального.

• obj.get(4) – номер четвертого объекта после начального.

• obj.next.get(2) – проверка номера второго объекта относительно первого в списке.